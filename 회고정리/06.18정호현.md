1. [**CI / CD 5분 개념 정리](https://www.youtube.com/watch?v=0Emq5FypiMM)** (Youtube)
2. [**CI/CD(CI CD, 지속적 통합/지속적 배포): 개념, 툴, 구축, 차이](https://www.redhat.com/ko/topics/devops/what-is-ci-cd) (Ret Hat docs)**
3. [**CI/CD 란](https://velog.io/@leejungho9/CICD-%EB%9E%80) (블로그)**
4. [**Github Actions + CodeDeploy + S3로 CI/CD 구축](https://velog.io/@leeeeeyeon/Github-Actions-CodeDeploy-S3%EB%A1%9C-CICD-%EA%B5%AC%EC%B6%95) (블로그)**
5. [**[배포 자동화] Github Actions & S3 & CodeDeploy](https://cookiee.tistory.com/688) (블로그)**
6. [**Github Action과 AWS CodeDeploy를 사용한 CI/CD 구축 방법](https://chae528.tistory.com/100) (블로그)**
7. [**iam-정책과-iam역할](https://www.inflearn.com/questions/868627/iam-%EC%A0%95%EC%B1%85%EA%B3%BC-iam%EC%97%AD%ED%95%A0) (인프런 질의응답)**
8. [[GitHub Actions] Job 여러개 만들고 실행하기.](https://kotlinworld.com/392) (블로그)
# CI, CD, 지속적 배포란?

---

## CI/CD가 필요한 상황은?

> 서비스를 배포하고 운용하던 중 코드를 변경할 일이 생김

→ 코드 수정 및 로컬 환경에서 테스트 진행하고 빌드도 잘 되는지 확인

→ jar 파일을 생성해 복사하고 AWS에 복사한 jar 파일 업로드해 서버에 새 배포 버전 제공

- 위의 과정은 프로젝트 규모가 커지면 굉장히 힘들어 질 것

👉 이러한 문제를 해결하기 위해(빌드부터 배포까지 자동화) CI/CD를 도입

## 지속적 통합 CI(Continuous Integration)

<aside> 💡 개발 팀이 정기적으로 코드에 대한 점진적 변화를 실행하고 테스트하는 접근 방식

</aside>

- 애플리케이션의 버그 수정이나 새 코드 변경이 주기적으로 빌드 및 테스트 됨 → 이러한 변화는 공유 중앙 리포지토리로 통합됨
    
- 모든 변화는 정기적이고 자동화된 빌드와 테스트를 통해 확인되어 코드 내 문제 빠르게 식별하고 해결 가능
    
- 여러 명이 동시에 작업하는 경우에도 충돌 방지하고 모니터링 할 수 있음
    



👉 개발 및 테스트 자동화 → 애플리케이션에 문제가 없음을 보장

### 지속적 통합의 장점

- 보안 이슈, 에러 등을 쉽게 파악할 수 있어 빠르게 개선 가능
- 코드를 머지하기 전, 이미 빌드 오류나 테스트 오류를 확인할 수 있어 더 효율적인 개발이 가능해짐

## 지속적 제공 CD(Continuous Delivery)

<aside> 💡 자동화를 사용해 새로운 코드를 빠르게 릴리스 하는 소프트웨어 개발 방식

</aside>

지속적 제공은 코드 변경 사항이 빌드, 테스트, 준비된 릴리스 상태까지 자동화되는 프로세스를 의미한다. 즉, 배포를 제외한 모든 단계가 자동화되어 있으며, 실제 프로덕션 배포는 여전히 수동으로 이루어진다. 이렇게 함으로써 팀은 항상 프로덕션 배포가 가능한 상태를 유지한다.

- CI 다음에 이루어짐
    
- 목표 : 최종 제품의 ‘정식으로 제작에 사용 가능’ 상태 유지
    
- 대개 개발팀이 변경한 애플리케이션 코드가 버그 테스트를 거쳐 리포지토리(ex. Github)에 자동으로 업로드 → 운영팀이 업로드 된 새 코드를 수동적으로 프로덕션 환경에 배포
    

#### 지속적 제공의 장점

- 안정성과 신뢰성: 모든 변경 사항은 자동화된 테스트를 거쳐 릴리스 준비가 되어 있어 품질이 보장됩니다.
- 빠른 피드백: 변경 사항이 빠르게 테스트되어 문제를 조기에 발견하고 수정할 수 있습니다.
- 릴리스의 신뢰성 증가: 수동 배포 전에도 릴리스 준비 상태를 지속적으로 확인할 수 있습니다.

#### 지속적 제공의 단점

- 수동 배포로 인한 지연: 실제 프로덕션 배포는 여전히 수동으로 이루어지므로 지연이 발생할 수 있습니다.


👉 처음부터 안정적인 코드만 제공 되므로 개발자는 자체적으로 테스트하는 데 소요되는 시간 단축 가능

## 지속적 배포 CD(Continuous Deployment)

<aside> 💡 개발자의 변경 사항을 리포지토리에서 프로덕션 환경으로 자동 릴리스하여 유저가 사용할 수 있도록 하는 과정

</aside>

지속적 배포는 지속적 제공의 연장선상에 있으며, 코드 변경 사항이 빌드, 테스트, 준비된 릴리스 단계를 거쳐 자동으로 프로덕션 환경에 배포되는 것을 의미한다. 여기서는 수동 개입 없이 모든 변경 사항이 자동으로 라이브 환경에 반영된다.

- 지속적 제공을 통해 성공적으로 병합한 코드 내역을 AWS 같은 배포 환경으로 보내는 것(=릴리스)
    
- 지속적 제공의 다음 단계까지 자동화
    
- 개발자가 애플리케이션에 변경 사항을 커밋한 후 몇 분 이내에 애플리케이션이 자동으로 배포되어 적용됨
    



### 지속적 배포의 장점

-  완전한 자동화: 변경 사항이 자동으로 프로덕션에 배포되므로 릴리스 속도가 빨라집니다.
- 빠른 피드백 루프: 변경 사항이 즉시 프로덕션에 반영되어 사용자의 피드백을 바로 받을 수 있습니다.
- 운영의 효율성 증가: 자동화된 배포로 인해 운영팀의 부담이 줄어듭니다.

### 지속적 배포의 단점


- 높은 위험성: 모든 변경 사항이 자동으로 프로덕션에 배포되므로, 문제가 발생할 경우 신속한 대응이 필요합니다.
- 복잡한 인프라 요구: 모든 단계를 자동화하기 위해 더 복잡한 인프라와 도구가 필요합니다.


# CI/CD 파이프라인

---

## CI/CD 파이프라인이란?

<aside> 💡 코드를 빌드, 테스트, 배포하는 과정을 거쳐 소프트웨어 개발을 추진하는 프로세스

</aside>

### CI/CD 파이프라인이 중요한 이유

1. 체계적인 CI/CD 접근 방식 → 파이프 라인 각 단계 명확하게 배치하여 정확히 어떤 작업이 이루어져야 하는지에 대한 상세한 개요 제공 → 구상부터 완료까지 프로젝트의 길잡이가 됨
2. 코드 내에 문제가 발생하면 프로세스 초기에 해결 가능 → 프로젝트 전체 코드 품질 ↑
3. 변화가 중앙 리포지토리에 자동 저장됨 → 관련 권한을 가진 팀과 개인이 모든 버전의 프로젝트에 직접 액세스 가능
4. 번거로움을 최소화하여 롤백 가능
5. 유저와 테스트 담당자가 즉각적인 피드백 제공 가능해짐
6. 테스트 주기가 짧아짐

## CI/CD 파이프라인 절차

### 계획

---

새 애플리케이션 구상하는 데 필요한 모든 백그라운드 작업 진행

### 개발

---

간소화된 코딩과 빠른 피드백 적용

프로세스 초기에 보안 적용해서 코드를 지속적으로 확인하여 정확성 유지

### 빌드

---

실행 가능한 인스턴스를 만듦

빌드 단계를 통과하지 못한다면 즉시 해결해야 함

### 테스트

---

자동화된 테스트를 통해 코드가 의도된 대로 작동하는지 확인

### 배포

---

테스트를 통해 코드에 문제가 없다는 것이 확인되면, 프로젝트를 배포 환경으로 전달 할 수 있음

### 운영

---

애플리케이션 모니터링 진행


## CodeDeploy

#### CodeDeploy란?

AWS CodeDeploy는 Amazon Web Services(AWS)에서 제공하는 완전 관리형 배포 서비스로, 애플리케이션 배포를 자동화하고 배포 프로세스의 복잡성을 줄이는 데 도움을 줍니다. AWS CodeDeploy는 EC2 인스턴스, Lambda 함수, 온프레미스 서버 등 다양한 컴퓨팅 환경에 애플리케이션을 배포할 수 있습니다.


- **배포 그룹(Deployment Group)**:
    
    - 배포 그룹은 애플리케이션을 배포할 대상의 논리적 그룹입니다.
    - EC2 인스턴스, Auto Scaling 그룹, Lambda 함수 또는 온프레미스 서버를 포함할 수 있습니다.
    
- **배포 유형(Deployment Type)**:
    
    - **In-Place 배포**: 기존 인스턴스에 애플리케이션을 덮어쓰는 방식입니다. 다운타임이 발생할 수 있습니다.
    - **Blue/Green 배포**: 새로운 인스턴스 또는 환경에 애플리케이션을 배포한 후, 트래픽을 새 인스턴스로 전환하는 방식입니다. 다운타임이 없고 롤백이 용이합니다.
    
- **AppSpec 파일**:
    
    - AppSpec 파일은 배포 프로세스를 정의하는 파일입니다. YAML 또는 JSON 형식으로 작성됩니다.
    - 소스 파일 위치, 설치 및 애플리케이션 시작 명령, 라이프사이클 이벤트 후크 등을 정의합니다.
    
- **라이프사이클 이벤트 후크(Lifecycle Event Hooks)**:
    
    - 배포 프로세스의 각 단계에서 실행되는 스크립트 또는 명령어입니다.
    - 예를 들어, 애플리케이션을 설치하기 전이나 후, 서버를 중지하거나 시작하기 전후에 특정 작업을 수행할 수 있습니다.
    
- **배포 구성(Deployment Configuration)**:
    
    - 배포 전략을 정의하는 설정입니다. 예를 들어, 한 번에 몇 퍼센트의 인스턴스에 배포할지, 배포 실패 시 롤백할지 등을 설정할 수 있습니다.
    - 기본적으로 제공되는 `CodeDeployDefault` 구성을 사용할 수 있으며, 커스텀 구성을 만들 수도 있습니다.


## CI/CD 툴
### Jenkins

Jenkins는 자바로 작성된 오픈 소스 자동화 서버로, 소프트웨어 개발 과정의 일부를 자동화하는 데 도움을 줍니다. 주로 지속적 통합(Continuous Integration, CI) 및 지속적 배포(Continuous Delivery, CD) 실천에서 사용되며, 개발자들이 코드 변경을 더 자주 통합하고 새로운 기능을 빠르고 안정적으로 배포할 수 있도록 합니다.

Jenkins의 특징
1. **파이프라인**: Jenkins는 파이프라인이라는 자동화된 워크플로우를 생성할 수 있게 합니다. 이 파이프라인은 애플리케이션을 빌드하고, 테스트하고, 배포하는 데 필요한 단계를 정의합니다. 파이프라인은 DSL(Domain-Specific Language)로 작성될 수 있습니다.
    
2. **플러그인**: Jenkins는 다양한 플러그인을 지원하여 확장할 수 있습니다. 빌드 도구, 소스 코드 관리 시스템, 클라우드 플랫폼 등과의 통합을 위해 수천 개의 플러그인이 제공됩니다.
    
3. **분산 빌드**: Jenkins는 마스터-슬레이브 아키텍처를 사용하여 분산 빌드를 지원합니다. 이를 통해 여러 빌드 에이전트(slave)를 사용하여 병렬로 빌드를 수행하고 빌드 시간을 단축할 수 있습니다.
    
4. **웹 인터페이스**: Jenkins는 사용자 친화적인 웹 기반 인터페이스를 제공하여 설정, 모니터링 및 관리 작업을 쉽게 수행할 수 있습니다.
    
5. **스크립트**: Jenkins 파이프라인은 Groovy 기반의 스크립트 언어를 사용하여 작성할 수 있으며, 이를 통해 복잡한 워크플로우도 쉽게 구현할 수 있습니다.
    
### GitHub Actions

GitHub Actions는 GitHub에서 제공하는 CI/CD(Continuous Integration and Continuous Deployment) 플랫폼으로, 개발자들이 소프트웨어 개발 라이프사이클의 다양한 단계를 자동화할 수 있도록 돕습니다. GitHub Actions를 사용하면 코드를 빌드, 테스트, 패키징, 릴리즈 및 배포하는 작업을 쉽게 자동화할 수 있습니다.

GitHub Action의 특징

1. **워크플로우(Workflow)**:
    
    - 워크플로우는 하나 이상의 작업(job)으로 구성된 자동화된 프로세스입니다.
    - `.github/workflows` 디렉터리에 YAML 파일로 정의됩니다.
    - 예를 들어, 코드가 푸시될 때, 풀 리퀘스트가 생성될 때, 일정 시간마다 등 다양한 이벤트에 의해 트리거될 수 있습니다.
    
2. **작업(Job)**:
    
    - 작업은 독립적으로 실행되는 명령어들의 집합입니다.
    - 하나의 워크플로우 내에 여러 작업을 정의할 수 있으며, 작업들 간의 의존성을 설정할 수 있습니다.
    
3. **단계(Step)**:
    
    - 각 작업은 여러 단계로 구성되며, 각 단계는 단일 명령어 또는 스크립트를 실행합니다.
    - 단계는 순차적으로 실행됩니다.
    
4. **액션(Action)**:
    
    - 액션은 재사용 가능한 코드 블록으로, 특정 작업을 수행하는 데 사용됩니다.
    - GitHub Marketplace에서 제공되는 다양한 액션을 사용하거나 직접 커스텀 액션을 작성할 수 있습니다.

5. **러너(Runner)**:
    
    - 러너는 워크플로우를 실행하는 가상 머신 또는 컨테이너입니다.
    - GitHub에서 제공하는 호스티드 러너를 사용할 수 있으며, 자체 호스티드 러너를 설정할 수도 있습니다.



## 실습 : Jenkins를 이용한 빌드 , 배포 
1. jenkins를 이용하여 gitRepository와 연결하여 빌드까지해보기
2. jenkins에서 빌드를 했을때 aws s3버킷에 자동으로 빌드된 파일 s3버킷에 올리기
3. jenkins에서 빌드를 했을때 aws ec2에 자동으로 배포까지 하기



